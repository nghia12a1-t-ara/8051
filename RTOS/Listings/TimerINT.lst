C51 COMPILER V9.60.0.0   TIMERINT                                                          04/17/2021 16:03:55 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE TIMERINT
OBJECT MODULE PLACED IN .\Objects\TimerINT.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE TimerINT.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\
                    -TimerINT.lst) TABS(2) OBJECT(.\Objects\TimerINT.obj)

line level    source

   1          #include "REGX52.h"
   2          
   3          void UART_Init(void)
   4          {
   5   1        // Baudrate = 9600
   6   1        TMOD = 0x20;    // Timer 1
   7   1        TH1 = TL1 = 0xFD;   // Baud = 9600
   8   1        
   9   1        // Frame    //SCON = 0b0101.0000 = 0x50
  10   1        SM0 = 0;
  11   1        SM1 = 1;    // Mode 1, 8 bit data
  12   1        REN = 1;    // Enable Serial  
  13   1        
  14   1        TR1 = 1;    // Start Timer
  15   1      }
  16          
  17          void UART_Transmit(char c)
  18          { 
  19   1        SBUF = c;       
  20   1        while (TI == 0);    // wait TI = 1 
  21   1        TI = 0;             // Clear trans flag
  22   1      }
  23          
  24          char UART_Receive(void)
  25          {
  26   1        char rei; 
  27   1        while (RI == 0);      // wait RI = 1
  28   1        RI = 0;
  29   1        rei = SBUF;
  30   1        return rei;
  31   1      }
  32          
  33          void UART_String(char* str)
  34          { 
  35   1        int i = 0;
  36   1        while(str[i] != '\0')
  37   1          UART_Transmit(str[i++]);
  38   1      }
  39          
  40          void main(void)
  41          {
  42   1        /* Setup */
  43   1        UART_Init();
  44   1        UART_String("abc");
  45   1        UART_Transmit('A');
  46   1        while(1)
  47   1        {
  48   2          if(UART_Receive() == 'a')
  49   2          {
  50   3            UART_Transmit('b');
  51   3          }
  52   2        }
  53   1      }
  54          
C51 COMPILER V9.60.0.0   TIMERINT                                                          04/17/2021 16:03:55 PAGE 2   

  55          
  56          
  57          
  58          
  59          
  60          
  61          
  62          
  63          
  64          
  65          
  66          
  67          
  68          
  69          
  70          
  71          
  72          
  73          
  74          
  75          
  76          
  77          
  78          
  79          
  80          
  81          
  82          
  83          
  84          
  85          
  86          
  87          
  88          
  89          
  90          //sbit LED = P1^0;
  91          //unsigned int T, Ton, Toff;
  92          
  93          //void main()
  94          //{
  95          //    /* Setup Timer Interrupt */
  96          //    TMOD = 0x01;
  97          //  
  98          //    /* INT Enable */
  99          //    ET0 = 1;    // Timer 0 Int Enable
 100          //    EA = 1;     // Global Interrupt Enable
 101          //    
 102          //    /* PWM Parameters */ 
 103          //    T = 1000;
 104          //    Ton = 700;
 105          //    Toff = T - Ton;
 106          //    
 107          //    /* Initialize */ 
 108          //    LED = 1;
 109          //    TH0 = (65535 - Ton)>>8;
 110          //    TL0 = (65535 - Ton)&0x00FF;
 111          //    
 112          //    /* Start Timer */
 113          //    TR0 = 1;
 114          //  
 115          //    while(1)
 116          //    {
C51 COMPILER V9.60.0.0   TIMERINT                                                          04/17/2021 16:03:55 PAGE 3   

 117          //      
 118          //    }
 119          //}
 120          
 121          //void TimerOverflow(void) interrupt 1
 122          //{
 123          //  TR0 = 0;
 124          //  LED = ~LED;
 125          //  if(LED == 0)
 126          //  {
 127          //    TH0 = 0xFE;
 128          //    TL0 = 0xD3;
 129          //  }
 130          //  else    // LED ON
 131          //  {
 132          //    TH0 = 0xFD;
 133          //    TL0 = 0x43;
 134          //  }
 135          //  TR0 = 1;
 136          //}
 137          
 138          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    110    ----
   CONSTANT SIZE    =      4    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
